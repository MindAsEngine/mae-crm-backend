# Подробное руководство по использованию управляющего скрипта

## Описание
Данный скрипт представляет собой инструмент управления Docker-приложением через интерактивное меню. Он позволяет выполнять основные операции по настройке, обновлению и управлению компонентами системы.

## Необходимые компоненты
1. **Docker** - основная платформа контейнеризации
2. **Docker Compose** - инструмент для управления многоконтейнерными приложениями
3. **Git** - система контроля версий для обновления приложения
4. **Bash** - командная оболочка (обычно предустановлена в системе)

## Запуск скрипта
1. Откройте терминал (Terminal/Command Prompt)
2. Перейдите в директорию со скриптом:
   ```bash
   cd путь_к_папке   # Пример: cd C:\Programs\MyApp
   ```
3. Выполните следующие команды:
   ```bash
   # Предоставление прав на выполнение:
   chmod +x menu.sh

   # Запуск скрипта:
   ./menu.sh         # стандартный режим (рекомендуется)
   ./menu.sh dev    # расширенный режим (только для разработчиков)
   ```

## Доступные команды

### 1. Проверка конфигурации (команда `1` или `envcheck`)
- Проверка наличия и валидности всех необходимых настроек
- Запрос недостающих параметров конфигурации
- Возможность просмотра текущих настроек
- Автоматическое исправление форматирования файлов

### 2. Обновление системы (команда `2` или `update`)
- Доступны два метода обновления:
  1. Через GitHub:
     - Автоматическая загрузка последних изменений
     - Применение обновлений с сохранением пользовательских настроек
  2. Из локального архива:
     - Требуется наличие файла GoldenHouseRepo.tar
     - Обновление выполняется из локальной копии

### 3. Управление образами Docker (команда `3` или `images`)
- Выборочное или полное удаление образов приложения
- Отдельное управление образами баз данных
- Подтверждение перед каждым важным действием

### 4. Управление томами (команда `4` или `volumes`)
⚠️ Требует особой осторожности!
- Управление хранилищами данных приложения
- Раздельное управление томами приложения и баз данных
- Возможность полной очистки (с подтверждением)

### 5. Управление сетью (команда `5` или `network`)
- Управление Docker-сетью приложения
- Безопасная операция без потери данных
- Возможность восстановления сети при необходимости

### 6. Запуск приложения (команда `6` или `start`)
- Запуск всех компонентов системы
- Автоматическая проверка готовности
- Ожидание полной инициализации (около минуты)

### 7. Полная очистка (команда `7` или `purge`)
⚠️ Доступно только в режиме разработчика!
- Полное удаление всех компонентов
- Необратимая операция
- Требует подтверждения

### 8. Завершение работы (команда `8` или `exit`)
- Корректное завершение работы скрипта
- Сохранение текущего состояния

### Дополнительные функции
- `clear` - очистка экрана терминала
- Интерактивные подтверждения важных операций (Y/N)
- Подробные сообщения о выполняемых действиях

## Важные предупреждения
⚠️ Соблюдайте следующие правила безопасности:
1. Не удаляйте тома баз данных без необходимости
2. Используйте команду purge только при полном понимании последствий
3. Режим разработчика предназначен только для опытных пользователей

## Порядок первого запуска
1. Откройте терминал
2. Перейдите в директорию приложения
3. Выполните `chmod +x menu.sh` (если нет прав на запуск)
4. Запустите `./menu.sh`
5. Выполните проверку конфигурации (команда 1)
6. При необходимости заполните параметры
7. Запустите приложение (команда 6)
8. Дождитесь завершения инициализации

# Инструкция по перезапуску приложения

## Описание
Данная инструкция описывает порядок действий для корректного перезапуска приложения после обновления файлов проекта.

## Последовательность действий

### 1. Остановка контейнеров
Запустите скрипт и выберите команду 0 (stop) для остановки всех контейнеров.

### 2. Обновление файлов проекта
1. Выберите команду 2 (update)
2. Выберите ресурс обновления (GitHUB ответив [Y/y] или архив [Any])
3. 1. Проверьте ссылку на репозиторий и ветку репозитория и нажмите [Y/y] если они совпадают с репозиторием предоставленным техподдержкой (если выбрали обновление через GitHUB)
3. 2. Подтвердите обновление при помощи архива (Подтвердите при помощи [Y/y] или отмените обновление [Any])
3. 3. Вы можете отменить обновление (например если выбрали не тот вариант обновления, для этого нужно нажать любую кнопку в пункте 3.1 или 3.2)
4. Дождитесь обновления файлов проекта

### 3. Удаление образов приложения
1. Выберите команду 3 (images)
2. Подтвердите удаление образов приложения, ответив Y
3. Откажитесь от удаления образов баз данных, ответив любой клавишей (в т.ч.Enter)

### 4. Удаление хранилищ приложения
1. Выберите команду 4 (volumes)
2. Подтвердите удаление хранилищ приложения
3. Следуйте инструкциям для удаления только хранилищ приложения
4. НЕ удаляйте хранилища баз данных

### 5. Удаление сети
1. Выберите команду 5 (network)
2. Подтвердите удаление сети приложения

### 6. Запуск приложения
1. Выберите команду 6 (start)
2. Дождитесь полной инициализации

## Быстрая последовательность команд
```bash
./menu.sh
3 -> Y -> N  # удаление образов
4 -> Y       # удаление хранилищ (только приложения)
5 -> Y       # удаление сети
6            # запуск
```

## Важные замечания
- ⚠️ Не удаляйте компоненты баз данных
- Дождитесь завершения каждой операции
- При ошибках проверьте логи

## Возможные проблемы
- Если образы не удаляются, проверьте, остановлены ли все контейнеры
- При ошибках сети убедитесь, что порты не заняты другими приложениями
- В случае проблем с хранилищами проверьте права доступа